<div id="collective-weather-wrapper"
     i18n:domain="collective.weather">

<dl class="actionMenu deactivated" 
    id="top-weather-viewlet"
    tal:condition="view/cities_list">

  <dt class="actionMenuHeader">
    <a id="current-city"
       href="#"
       tal:define="city_name view/current_city/name">
        <span tal:content="python: city_name.split(',')[0] if city_name else ''">Cordoba, Argentina</span>
    </a>
    <div id="current-weather"
         tal:define="current_weather python:view.weather_info[view.current_city['id']]['weather']">
      <tal:block condition="current_weather">
        <img class="weather-icon" tal:attributes="src python:current_weather['icon']"/>
        <span tal:content="python:current_weather['temp']" />
        <span class="condition" tal:content="python:current_weather['conditions']" />
        <!--<img src="#" tal:attributes="src python:current_weather['icon']" />-->
      </tal:block>
      <tal:block condition="not:current_weather">
        <span class="no-weather-info" i18n:translate="">No weather information</span>
      </tal:block>
    </div>
  </dt>
  <dd class="actionMenuContent">
    <ul>
        <li tal:repeat="city python:[i for i in view.cities_list if i['id'] != view.current_city['id']]"
            tal:attributes="id string:top-weather-${city/id}">
            <a href="#"
               tal:attributes="href string:${context/absolute_url}?city_weather=${city/id}"
               tal:content="city/name"
               i18n:translate="">
                City name
            </a>
        </li>
    </ul>
  </dd>
</dl>

</div>
